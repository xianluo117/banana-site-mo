# Gemini Pro 工作台 v4.9 修改版

一个功能强大的纯前端 **Gemini 多模态工作台**，支持多种 API 格式、批量生成、多轮对话构建，以及丰富的配置选项。

> 无后端、纯静态页面，一开即用。

---

## 功能特点

### 🔗 多 API 格式支持
- **Gemini** - 原生 Google Gemini API
- **OpenAI** - 兼容 OpenAI API 格式（适用于各类中转/聚合服务）
- **Vertex** - Google Cloud Vertex AI 接口

### 🖼️ 图片输入
- 支持文件选择、拖拽上传、剪贴板粘贴三种方式
- 多图参考输入
- 自动转换为 WebP 格式以优化请求体积
- 可调节 WebP 压缩质量（50-100）

### 🔄 批量并发生成
- 可设置并发数（1-10）
- 每个生成任务独立管理，支持单独重试、停止、查看原始数据
- 支持多选批量下载为 ZIP

### 📝 多轮对话构建器
- 可视化构建多轮对话（用户/模型交替）
- 支持系统指令（System Instruction）
- 支持模型预填充（Model Prefill）
- 每轮对话可独立添加图片附件

### ⚙️ 高级配置
- **思考配置** - 启用/禁用思考过程，可调节思考预算（Tokens）
- **图像参数** - 分辨率（1K/2K/4K）、比例（1:1、3:4、4:3、9:16、16:9 等）
- **安全设置** - 各类内容过滤阈值的精细控制
- **自定义 JSON** - 支持合并自定义请求字段

### 💾 数据持久化
- API 配置保存/加载
- 提示词预设收藏
- 对话历史保存
- 多对话合集保存
- 完整库导入/导出

### 🎨 界面定制
- 明/暗主题切换
- 黑白模式
- 卡片大小调节（小/中/大）
- 卡片密度滑块（1-5 级）

---

## 快速开始

> 本项目是纯静态页面，无需构建工具，直接打开即可运行。

### 1. 获取项目

```bash
# 克隆仓库
git clone <your-repo-url>
cd <your-repo>

# 或直接下载 zip 解压
```

### 2. 打开页面

最简单方式：直接用浏览器打开 `生图前端4.9-修改版.html` 即可。

也可以开一个本地静态服务器（可选）：

```bash
# Python 3
python -m http.server 8000
# 然后打开 http://localhost:8000/生图前端4.9-修改版.html
```

---

## 使用说明

### 1. 配置连接

1. 选择 **API 格式**（Gemini / OpenAI / Vertex）
2. 填写 **Base URL**（默认为 Google 官方端点，可改为自建代理）
3. 填写 **API 版本**（Gemini: v1beta, OpenAI: v1, Vertex: v1beta1）
4. 填写 **API 密钥**
5. 点击「保存配置」可将当前配置持久化，方便日后快速切换

### 2. 选择模型

- 在「模型 ID」输入框填写或选择模型
- 点击「刷新列表」可自动获取可用模型列表

### 3. 输入提示词

- 在顶部输入框输入提示词
- 点击展开按钮可进入「多轮对话构建器」进行复杂对话设计

### 4. 添加图片（可选）

- 点击「媒体」按钮选择图片
- 直接拖拽图片到页面
- 使用 Ctrl+V / ⌘+V 粘贴剪贴板图片

### 5. 调整参数

- **并发数** - 控制同时发起的请求数量
- **温度** - 控制生成的随机性
- **系统提示词** - 定义模型的角色和约束
- **模型预填充** - 设置模型的初始回复内容

### 6. 高级配置

点击「高级配置」按钮可访问：
- 思考配置（Thinking Config）
- 图像参数（分辨率、比例、响应模态）
- 安全设置（各类内容过滤器）
- 自定义 JSON 载荷

### 7. 生成

点击「生成」按钮开始批量生成。每个生成任务会显示为独立卡片，支持：
- 查看完整对话（点击聊天图标）
- 查看原始请求/响应数据
- 停止生成
- 重试
- 删除

### 8. 批量操作

勾选多个卡片后，底部工具栏支持：
- 全选
- 批量下载图片为 ZIP
- 保存为合集
- 批量删除

---

## 技术栈

- 纯 HTML + Tailwind CSS + 原生 JavaScript
- 无任何构建工具、框架依赖
- 使用的第三方库：
  - [Tailwind CSS](https://tailwindcss.com/) - 样式
  - [Marked.js](https://marked.js.org/) - Markdown 渲染
  - [Highlight.js](https://highlightjs.org/) - 代码高亮
  - [JSZip](https://stuk.github.io/jszip/) - ZIP 打包下载

---

## 本地存储

所有设置和数据均存储在浏览器 `localStorage` 中：

| 键名 | 说明 |
|------|------|
| `gem_base` | Base URL |
| `gem_ver` | API 版本 |
| `gem_key` | API 密钥 |
| `gem_model` | 当前模型 |
| `gem_api_format` | API 格式 |
| `gem_api_configs` | 已保存的 API 配置列表 |
| `gem_vertex_keys` | Vertex Keys |
| `gem_adv_config_v4.0` | 高级配置 |
| `gem_presets_v3.7` | 提示词预设 |
| `gem_chats_v3.7` | 已保存对话 |
| `gem_collections_v1.0` | 对话合集 |
| `gem_theme` | 主题设置 |
| `gem_bw` | 黑白模式 |
| `gem_card_size` | 卡片大小 |
| `gem_card_density` | 卡片密度 |

---

## 常见问题

### 1. 提示「需要 API 密钥」
请在左侧面板填写有效的 API Key。

### 2. HTTP 401 / 403 错误
- API Key 无效或已过期
- 所用模型权限不足
- 账单问题

### 3. 429 错误
请求频率过高，工具会自动重试（最多 3 次）。

### 4. 生成的图片无法显示
- 检查网络连接
- 查看原始响应数据排查问题
- 尝试降低分辨率或更换模型

---

## 更新日志

### v4.9 修改版
- 感谢牢墨和 gemini-3-pro-preview 的修改建议
- 各种小功能添加
- 修复了一些 bug
- 现在默认隐藏思维链和文字回答

---

## 部署建议

本工具是 **纯前端静态页面**，可直接部署到：

- GitHub Pages / Gitee Pages
- Vercel / Netlify / Cloudflare Pages
- 任意 Nginx / 静态资源服务器

只需保证 HTML 文件可被访问即可，无需额外后端。

---

## 许可证

MIT License
